#include "common.cpp"
#include <fstream>
#include <regex>
#include <iostream>
#include <unordered_map>
#include <string>
#include <vector>
#include <sstream>
#include <optional>
#include <variant>
#include <deque>
#include <array>
#include <set>
#include <map>

struct Cell {
	int x, y;
	char value;
};

struct Matrix {
	std::vector<std::vector<Cell>> cells;

	// Default constructor
	Matrix() = default;

	// Set a cell value
	void set(int x, int y, char value) {
		while (cells.size() <= y) {
			cells.push_back(std::vector<Cell> {});
		}


		while (cells[y].size() <= x) {
			cells[y].push_back(Cell{ -1, -1, '.' });
		}

		cells[y][x] = Cell{ x,y,value };
	}

	// Get a cell value
	Cell get(int x, int y) {
		if (y < cells.size() && x < cells[y].size()) {
			return cells[y][x];
		}
		return Cell{ -1, -1, '.' }; // Return an empty cell if out of bounds
	}

	// Remove a cell
	bool erase(int x, int y) {
		if (y < cells.size() && x < cells[y].size()) {
			cells[y][x] = Cell{ -1, -1, '.' }; // Empty cell
			return true;
		}
		return false;
	}

	// Find a cell
	Cell* find(int x, int y) {
		if (y < cells.size() && x < cells[y].size()) {
			return &cells[y][x];
		}
		return nullptr;
	}

};

struct Sequence {
	std::string direction;

	std::vector<Cell> cells;

	void add(const Cell& cell) {
		cells.push_back(cell);
	}
};

int main() {

	std::ifstream file("input.txt");
	Matrix matrix;
	std::string line;
	int y = 0;

	while (std::getline(file, line)) {
		for (size_t x = 0; x < line.size(); ++x) {
			matrix.set(y, static_cast<int>(x), line[x]);
		}
		++y;
	}

	file.close();

	int finally_found = 0;

	std::map<char, int> search_map = {
	   {'A', 0},
	   {'M', 0},
	   {'S', 0}
	};

	int bottom_offset = 2;
	int right_offset = 2;

	for (size_t i = 0; i < matrix.cells.size() - bottom_offset; i++) {
		for (size_t j = 0; j < matrix.cells[i].size() - right_offset; j++) {

			/*
===============+++++++++*****#####%##%@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@%%#*++#%%%%%%##
===============+++++++++*****%%###%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%*++#%%%%%%%%
===============+++++++++*****%%###%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@%%%*++#%%%%%%%%
===============+++++++++*+***%%###%%%%@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*++#%%%%%%%%
===============++++++++++*+**%%###%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@%%@@%%%*++*%%%%%%%%
===============++++++++++****#%###%%%%@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@%%%*++*%%%%%%%%
===============++++++++++****#####%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%*++*%%%%%%%%
=-==============++++++++++***#%%%%%%%@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@%%%%*++*%%%%%@%%
-=-=============+++++++++****#%%%%#%%%%%%%%%%%@@@@@@@@@@%@@%%%%#*#*#---===++#%%%%%%%%%%%*++*%%%%%%@%
----============++++++++*****#%%%%#%%%%%%%%%%%%%%%%%%%%%%%%#%%#**#+###*=::::::::+#%%%%#*+++*#%%%%%%%
------=-========+++++++++****##%%%####%%%%%%%%%%%%%%%%%%%##%##%##%%%%%%%###***-::==*###*+++*#%%%%%%%
-----=--========+++++++++*+**##%%%#+===+++****************%%#***##%%%%%%####%%%*+**==*#*+++*########
----------======+++++++++++**##%%%#####***********########%#-::::----=+*#%%%%%%*:+%%#+:++++*#%%%%%%%
---------=-=====++++++++++++**#%%%#%%%%#%%%%%%%%%%%%%%%%%%*:::::::::---=+*#%%%%%###%%%#+*++*#%%%%%%%
----------======+++++++++++***#%%%#%%%%%@@@@@@@@@@%%%%%%#*::::::::---==++++*#%%%%%####**#*+*#%%%%%%%
----------=-====+++++++++++++*#%%%#%%%%%@@@@@@@@@%%%%%%%#-:::::::---==+=++*#%%%%%@%%%%*=+*+*#%%%%%%%
------------====++++++++++++**##%%##*++*%%%%%%%%%%%%%%%#*++-:::::-=+====+**#%%@%@@%#%@%#*#+*#%%%%%%%
-------------====+++==+++++++*###*+*##%%%%%%%%%%%%%%%%%#=+#*--=##**+===+**##%%@@@@@%%@@%##++#%%%%%%%
------------=-===++===+++++++*#*+*##%%%%%%%%%%%%%%%%%%%#+***==*#########*###%%@%@@%%@@@@%%*+********
-------------====++======++++++=*#%%%%%%%%%%%%%%%%%%%%#+-=+=:=####*%###*#####%%@@@@@@@@@@%**##%%%%%%
---------------==++======+++=-::-+#%%%%%%%%%#%%%%%%%%%*:::::=+++++++*+++*####%@@@@@@@@@@%%**##%%%%%%
---------------==++======+++==-:::-=##%%%%%#*+#%%%%%%#-::::=***+-::--=+****##%@@@@@@@@%++%%*###%%%##
---------------==++=======++++***=---=+******+=+#%%%%#--+-+*#***+-::-=+****##%%%%%%%%%%*-#**#####%##
----------------=+++=====+++++*#%##*+---++==--=*##%%##++=--*###*=--=++****#######%%#%%%%%*+*#####%%%
-----------------++======+++++*#%%####*+-=+++*##%%##%##-+=-::--===+++********#*#####%@@%%%=+#**##***
-----------------=++======++++*#######*=:-+#%%%%%%%####*-+-:::-*##**+******#*###*#%%%@%%%%+*##*#**+=
-----------------+++======++++*####*=::::.:=*#%%#+#%#*##------++++++=******####%%%%%%%%%%#+*#*****+=
-----------------=+========+++*###=:::::::::=+*==##***##-:-===+++++-**+#****#*##%%%%%%%%%*+*#*****++
-----------------=++=======+++**:::::::::::::********###-::::--=---***###**+*++=+++*%%%%#++*##***+++
-----------------=+=========+-:::::::::::::-+##*+*##%###=::::-:-=*#####***=====+++++*%%%*++*##***+++
-----------------==========-:::::::::::-+**#########%####*++++*#####**+=--=+++++=---:=**=++*#***++++
-----------------=======-:::::::::::=+*#############%#######******+=-:::=+=-=+*==:......:-=+#****+++
-----------------=====-:::::::::-=**################%###++::::::--:::-=+*#*+=-::..........:=*****+++
-----------------===::::::::::=*####################%##=::::::::::::=**=:::::::...:....:....:*++*+++
------------------:::::::::=+++*#%#################%##*..:..::::::------::...::::::::::::.....=+*+++
----------------::::::::-+==+++*#%###%%%%%%%%%%%%%%%##=::::::=--::---:.........................-**##
--------::--::::::::::=+===++++##%%##%%%%%%%%%%%%%%%##::..::+-:::--:.::::::::...................=*##
------::::::::::::::=======+++**#%%#%%%%%%%%%%%%%%%%#-:::.:::::::::-=---:-+*+-==:::..............=*+
----:::::::==::::-=========++++*#%%#%%%%%%%%%%%%%%%#*:.:::::::--:-*+--==*=+=--++=--++-:..........:+*
---:::::-=+***+:::=========++++*#%%##%%%%%%%%%%%%%#+..::::-:--::=-:::---=++++*+=--++=+*-:......:...*
--::::-==+****+=::-=======+++++*#%%##%%%%%%%%%%%%#-::::::=:::::::::--::-----:::::-==+*#**-::...:...:
:::::=+++***#=::::=========++++*#%%##%%%%%%%%%%%#+=:::::+-:::::::::---::--==-=*####****##*-::::::..:
-:--+*+*****-:::::=========++++*#%%##%%%%%%%%%%#*--::::=-::::::::::::-------=**+==+******#*--:::::::
:-=****##*#+-=+=:-=+=======++++*#%%##%%%%%%%%%##-=:::::::::::::::::::::::::-====+**########*++-+::::
-=+***####**+**+:-=+=======++++*#%%##%%%%%%%%##--:::::::::::::::::-----+**########%%#######**+-=-:::
=+*******++***+::-==========+++*#%%##%%%%%%#*+:::::::::::::::::::::=*****+++++**#######%###**=++-:::
++++**********-::::-========+++*##%######+-::::::::::-::::-=+++**##########################*=*++===-
==--=+******++::::::::-=====+++*###+-:::::::::::::::::::-+++++**+++********###%%%%%%%#####*+****+++=
*/

			if ( // MM top
				( // top left
					matrix.get(j + 0, i + 0).value == 'M' &&
					matrix.get(j + 1, i + 1).value == 'A' &&
					matrix.get(j + 2, i + 2).value == 'S'
					) &&
				(// top right
					matrix.get(j + 2, i + 0).value == 'M' &&
					matrix.get(j + 1, i + 1).value == 'A' &&
					matrix.get(j + 0, i + 2).value == 'S'
					)
				) {
				finally_found++;
			}
			else if ( // MM left
				( // top-left
					matrix.get(j + 0, i + 0).value == 'M' &&
					matrix.get(j + 1, i + 1).value == 'A' &&
					matrix.get(j + 2, i + 2).value == 'S'
					) && ( // bot-left
						matrix.get(j + 0, i + 2).value == 'M' &&
						matrix.get(j + 1, i + 1).value == 'A' &&
						matrix.get(j + 2, i + 0).value == 'S'
						)

				) {
				finally_found++;
			}
			else if ( // MM bot
				(// bot-left
					matrix.get(j + 0, i + 2).value == 'M' &&
					matrix.get(j + 1, i + 1).value == 'A' &&
					matrix.get(j + 2, i + 0).value == 'S'
					) && (// bot-right
						matrix.get(j + 2, i + 2).value == 'M' &&
						matrix.get(j + 1, i + 1).value == 'A' &&
						matrix.get(j + 0, i + 0).value == 'S'
						)
				) {
				finally_found++;
			}
			else if (// MM right
				( // top-right
					matrix.get(j + 2, i + 0).value == 'M' &&
					matrix.get(j + 1, i + 1).value == 'A' &&
					matrix.get(j + 0, i + 2).value == 'S'
					) && (// bot-right
						matrix.get(j + 2, i + 2).value == 'M' &&
						matrix.get(j + 1, i + 1).value == 'A' &&
						matrix.get(j + 0, i + 0).value == 'S'
						)
				) {
				finally_found++;
			}
		}
	}
	std::cout << "finally_found: " << finally_found << std::endl;
	return 0;
}
